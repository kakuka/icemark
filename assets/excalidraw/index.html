<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excalidraw Viewer</title>
    <link rel="stylesheet" href="assets/css/unified-prototype.css">
    <style>
        /* é‡ç½®é»˜è®¤æ ·å¼ï¼Œé˜²æ­¢æ»šåŠ¨æ å‡ºç° */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        /* ä½¿ç”¨flexå¸ƒå±€åˆ†å‰²é¡µé¢ */
        body {
            display: flex;
            flex-direction: column;
        }
        
        /* é¡¶éƒ¨å·¥å…·æ  - VSCodeæ·±è‰²ä¸»é¢˜é£æ ¼ */
        .unified-toolbar {
            display: flex !important; /* è¦†ç›–CSSæ–‡ä»¶ä¸­çš„display: none */
            justify-content: space-between;
            align-items: center;
            height: 32px;
            width: 100%;
            background: #2d2d2d; /* VSCodeæ·±è‰²èƒŒæ™¯ */
            border-bottom: 1px solid #404040; /* æ·±è‰²è¾¹æ¡† */
            padding: 0 12px;
            flex-shrink: 0; /* é˜²æ­¢å·¥å…·æ è¢«å‹ç¼© */
        }
        
        .toolbar-left {
            display: flex;
            align-items: baseline; /* æ”¹ä¸ºåŸºçº¿å¯¹é½ï¼Œè®©æ–‡å­—åº•éƒ¨å¯¹é½ */
            gap: 8px;
        }
        
        .toolbar-right {
            display: flex;
            align-items: baseline;
            gap: 12px;
        }
        
        /* IceVieweræ ‡è¯† */
        #IceViewer {
            font-size: 14px;
            font-weight: 500;
            color: #ffffff; /* ç™½è‰²æ–‡å­— */
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        /* Excalidrawå›¾æ ‡ */
        .excalidraw-icon {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }
        
        /* æ–‡ä»¶è·¯å¾„æ ·å¼ */
        .prototype-path {
            font-size: 12px;
            color: greenyellow; 
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            opacity: 0.9;
        }
        
        @font-face {
            font-family: "Virgil";
            src: url("assets/fonts/Virgil.woff2") format("woff2");
            font-display: swap;
        }
        
        @font-face {
            font-family: "Chinese";
            src: url("assets/fonts/Chinese.woff2") format("woff2");
            font-display: swap;
        }
        
        /* ä¸º Virgil å­—ä½“æ·»åŠ ä¸­æ–‡åå¤‡å­—ä½“ */
        @font-face {
            font-family: "Virgil";
            src: url("assets/fonts/Chinese.woff2") format("woff2");
            font-display: swap;
            unicode-range: U+4E00-9FFF, U+3400-4DBF, U+20000-2A6DF, U+2A700-2B73F, U+2B740-2B81F, U+2B820-2CEAF, U+F900-FAFF, U+2F800-2FA1F;
        }
        
        /* Excalidrawå®¹å™¨ - å ç”¨å‰©ä½™ç©ºé—´ */
        .container {
            flex: 1; /* å ç”¨å‰©ä½™çš„æ‰€æœ‰ç©ºé—´ */
            width: 100%;
            overflow: hidden; /* é˜²æ­¢æº¢å‡º */
        }
        
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 18px;
            color: #666;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <div class="unified-toolbar">
        <div class="toolbar-left">
            <span id="IceViewer">
                â˜˜ï¸ IceViewer
            </span>
            <span class="prototype-path" id="prototype-path">Loading...</span>
        </div>
        <div class="toolbar-right">
            <div class="status-indicator" id="save-indicator"></div>
            <div class="connection-status" id="connection-status">
                <span>Icemark Server</span>
                <div class="status-dot" id="status-dot"></div>
            </div>
        </div>
    </div>
    <div id="excalidraw-container" class="container">
        <div class="loading">
            <div>ğŸ¨ Loading Excalidraw...</div>
        </div>
    </div>

    <script>
        // è®¾ç½® Excalidraw èµ„æºè·¯å¾„
        window.EXCALIDRAW_ASSET_PATH = "./assets/";
        
        // ç¡®ä¿ä¸­æ–‡å­—ä½“åŠ è½½
        if (document.fonts && document.fonts.load) {
            document.fonts.load('1em Chinese').then(() => {
                console.log('Chinese font loaded successfully');
            }).catch(err => {
                console.warn('Failed to load Chinese font:', err);
            });
        }
    </script>

    <script src="assets/js/excalidraw-manager.js"></script>
    <script src="assets/js/react.production.min.js"></script>
    <script src="assets/js/react-dom.production.min.js"></script>
    <script src="assets/js/excalidraw.production.min.js"></script>
    <script src="assets/js/app.js"></script>
</body>
</html> 